<tal:block xmlns:tal="http://xml.zope.org/namespaces/tal"
           xmlns:ajax="http://namesspaces.bluedynamics.eu/ajax"
           xmlns:i18n="http://xml.zope.org/namespaces/i18n"
           i18n:domain="cone.app"
           omit-tag="True">

  <li class="dropdown"
      tal:define="transitions context.transitions;
                  state context.model.state"
      tal:condition="state">

    <tal:transitions condition="transitions">

      <a href="#"
         class="state-${state} dropdown-toggle"
         title="Change state"
         data-toggle="dropdown"
         tal:condition="transitions"
         i18n:attributes="title change_state">
        <span i18n:translate="state">State</span>:
        <span tal:content="context.state_name">State</span>
      </a>

      <ul class="dropdown-menu" role="workflowmenu">
        <li tal:repeat="transition transitions">
          <a href="#"
             ajax:bind="click"
             ajax:target="${transition.target}"
             ajax:action="wf_dropdown:NONE:NONE"
             tal:content="transition.title">
            transition
          </a>
        </li>
      </ul>

    </tal:transitions>

    <tal:notransitions condition="not transitions">
      <span class="no-transitions state-${state}">
        <span i18n:translate="state">State</span>:
        <span tal:content="context.state_name">State</span>
      </span>
    </tal:notransitions>

  </li>

</tal:block>
